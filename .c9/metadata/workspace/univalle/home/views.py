{"filter":false,"title":"views.py","tooltip":"/univalle/home/views.py","undoManager":{"mark":35,"position":35,"stack":[[{"start":{"row":224,"column":40},"end":{"row":225,"column":0},"action":"insert","lines":["",""],"id":2},{"start":{"row":225,"column":0},"end":{"row":225,"column":2},"action":"insert","lines":["\t\t"]}],[{"start":{"row":225,"column":2},"end":{"row":226,"column":0},"action":"insert","lines":["",""],"id":3},{"start":{"row":226,"column":0},"end":{"row":226,"column":2},"action":"insert","lines":["\t\t"]}],[{"start":{"row":226,"column":1},"end":{"row":226,"column":2},"action":"remove","lines":["\t"],"id":4}],[{"start":{"row":226,"column":0},"end":{"row":226,"column":1},"action":"remove","lines":["\t"],"id":5}],[{"start":{"row":225,"column":2},"end":{"row":226,"column":0},"action":"remove","lines":["",""],"id":6}],[{"start":{"row":225,"column":2},"end":{"row":226,"column":0},"action":"insert","lines":["",""],"id":7},{"start":{"row":226,"column":0},"end":{"row":226,"column":2},"action":"insert","lines":["\t\t"]}],[{"start":{"row":226,"column":1},"end":{"row":226,"column":2},"action":"remove","lines":["\t"],"id":8}],[{"start":{"row":226,"column":0},"end":{"row":226,"column":1},"action":"remove","lines":["\t"],"id":9}],[{"start":{"row":226,"column":0},"end":{"row":312,"column":34},"action":"insert","lines":["def add_inscripciones_view(request):","\tif request.user.is_authenticated():","\t\tif request.method == \"POST\":","\t\t\tformulario = InscripcionesForm(request.POST)","\t\t\tinfo = \"Inicializando\"","\t\t\t","\t\t\tif formulario.is_valid():","\t\t\t\tcedula = formulario.cleaned_data['cedula']","\t\t\t\tnombre = formulario.cleaned_data['nombre']","\t\t\t\tapellido = formulario.cleaned_data['apellido']","\t\t\t\tsnp = formulario.cleaned_data['snp']","\t\t\t\tif snp:","\t\t\t\t\ticfes = requests.get('https://morning-brushlands-79611.herokuapp.com/v1/resultados/?codigo=%s&format=json' % snp)","\t\t\t\t\ticfes_json = icfes.json()","\t\t\t\t\tlectura_critica= (icfes_json[0][\"lectura_critica\"])","\t\t\t\t\tmatematicas= (icfes_json[0][\"matematicas\"])","\t\t\t\t\tsociales= (icfes_json[0][\"sociales\"])","\t\t\t\t\tnaturales= (icfes_json[0][\"naturales\"])","\t\t\t\t\tingles= (icfes_json[0][\"ingles\"])","\t\t\t\t\trazonamiento_cuantitativo= (icfes_json[0][\"razonamiento_cuantitativo\"])","\t\t\t\t\tcompetencias_ciudadanas= (icfes_json[0][\"competencias_ciudadanas\"])","\t\t\t\tcolegio = formulario.cleaned_data['colegio']","\t\t\t\tref_pago = formulario.cleaned_data['ref_pago']","\t\t\t\tif ref_pago:","\t\t\t\t\trespuesta = requests.get('http://ws-bank-julianrico.c9users.io/rest/consignacion/?cedula=%s&format=json' % ref_pago)","\t\t\t\t\trespuesta_json = respuesta.json()","\t\t\t\tprograma = str(formulario.cleaned_data['programas_academicos'])","\t\t\t","\t\t\t\ti = inscripciones() #creo una instancia de la clase inscripcion","\t\t\t\t","\t\t\t\ti.cedula = cedula","\t\t\t\ti.nombre = nombre","\t\t\t\ti.apellido = apellido","\t\t\t\ti.snp = snp","\t\t\t\ti.lectura_critica = lectura_critica","\t\t\t\ti.matematicas = matematicas","\t\t\t\ti.sociales = sociales","\t\t\t\ti.naturales = naturales","\t\t\t\ti.ingles = ingles","\t\t\t\ti.razonamiento_cuantitativo = razonamiento_cuantitativo","\t\t\t\ti.competencias_ciudadanas = competencias_ciudadanas","\t\t\t\ti.colegio = colegio","\t\t\t\ti.ref_pago = ref_pago","\t\t\t\ti.carrera = programa","\t\t\t\t","\t\t\t\ti.save() #guardar inscripcion","\t\t\t\t","\t\t\t\t#Consulta de los ponderados de cada materia","\t\t\t\ttry:","\t\t\t\t\tp = programasAcademico.objects.get(nombre=programa)","\t\t\t\texcept programasAcademico.DoesNotExist:","\t\t\t\t\tinfo = \"Programa No existe\"","\t\t\t\telse:","\t\t\t\t\tpl = p.lectura_critica","\t\t\t\t\tpm = p.matematicas","\t\t\t\t\tps = p.sociales","\t\t\t\t\tpn = p.naturales","\t\t\t\t\tpi = p.ingles","\t\t\t\t\tpr = p.razonamiento_cuantitativo","\t\t\t\t\tpc = p.competencias_ciudadanas","\t\t\t\t#Aqui se multiplica cada uno de los resultados de cada prueba por la ponderación que el programa académico ","\t\t\t\tpuntaje = float((lectura_critica) * (pl)) + float((matematicas) * (pm)) + float((sociales) * (ps)) + float((naturales) * (pn)) + float((ingles) * (pi)) + float((razonamiento_cuantitativo) * (pr)) + float((competencias_ciudadanas) * (pc))","\t\t\t\t","\t\t\t\t#Guardo datos para generar la lista de admitidos","\t\t\t\ta = lista_admitidos() #creo una instancia de la clase lista","\t\t\t\t","\t\t\t\ta.cedula = cedula","\t\t\t\ta.nombre = nombre","\t\t\t\ta.apellido = apellido","\t\t\t\ta.puntaje = puntaje                         ","\t\t\t\ta.carrera = programa","\t\t\t\t","\t\t\t\ta.save() #guardar listado","\t\t\t\tinfo = \"Inscripción Satisfactoria!!!!!!\"","\t\t\t\tformulario = InscripcionesForm()","\t\t\telse:","\t\t\t\tinfo = \"Informacion con datos incorrectos\"","\t\t\tform = InscripcionesForm()","\t\t\tctx = {'form':formulario, 'informacion':info}","\t\t\treturn render(request,'inscripciones.html',ctx)","","\t\telse:","\t\t\tformulario = InscripcionesForm()","\t\tctx = {'form':formulario}","\t\treturn render(request,'inscripciones.html',ctx)","\telse:","\t\treturn HttpResponseRedirect('/')"],"id":10}],[{"start":{"row":310,"column":37},"end":{"row":310,"column":38},"action":"remove","lines":["s"],"id":11}],[{"start":{"row":310,"column":36},"end":{"row":310,"column":37},"action":"remove","lines":["e"],"id":12}],[{"start":{"row":305,"column":37},"end":{"row":305,"column":38},"action":"remove","lines":["e"],"id":13}],[{"start":{"row":305,"column":37},"end":{"row":305,"column":38},"action":"remove","lines":["s"],"id":14}],[{"start":{"row":226,"column":7},"end":{"row":226,"column":8},"action":"remove","lines":["_"],"id":15}],[{"start":{"row":226,"column":6},"end":{"row":226,"column":7},"action":"remove","lines":["d"],"id":16}],[{"start":{"row":226,"column":5},"end":{"row":226,"column":6},"action":"remove","lines":["d"],"id":17}],[{"start":{"row":226,"column":4},"end":{"row":226,"column":5},"action":"remove","lines":["a"],"id":18}],[{"start":{"row":226,"column":16},"end":{"row":226,"column":17},"action":"remove","lines":["s"],"id":19}],[{"start":{"row":226,"column":15},"end":{"row":226,"column":16},"action":"remove","lines":["e"],"id":20}],[{"start":{"row":304,"column":30},"end":{"row":304,"column":41},"action":"remove","lines":["informacion"],"id":21},{"start":{"row":304,"column":30},"end":{"row":304,"column":31},"action":"insert","lines":["i"]}],[{"start":{"row":304,"column":31},"end":{"row":304,"column":32},"action":"insert","lines":["n"],"id":22}],[{"start":{"row":304,"column":32},"end":{"row":304,"column":33},"action":"insert","lines":["f"],"id":23}],[{"start":{"row":304,"column":33},"end":{"row":304,"column":34},"action":"insert","lines":["o"],"id":24}],[{"start":{"row":303,"column":22},"end":{"row":303,"column":23},"action":"remove","lines":["s"],"id":25}],[{"start":{"row":303,"column":21},"end":{"row":303,"column":22},"action":"remove","lines":["e"],"id":26}],[{"start":{"row":308,"column":28},"end":{"row":308,"column":29},"action":"remove","lines":["s"],"id":27}],[{"start":{"row":308,"column":27},"end":{"row":308,"column":28},"action":"remove","lines":["e"],"id":28}],[{"start":{"row":229,"column":28},"end":{"row":229,"column":29},"action":"remove","lines":["s"],"id":29}],[{"start":{"row":229,"column":27},"end":{"row":229,"column":28},"action":"remove","lines":["e"],"id":30}],[{"start":{"row":300,"column":29},"end":{"row":300,"column":30},"action":"remove","lines":["s"],"id":31}],[{"start":{"row":300,"column":28},"end":{"row":300,"column":29},"action":"remove","lines":["e"],"id":32}],[{"start":{"row":302,"column":12},"end":{"row":302,"column":45},"action":"remove","lines":["Informacion con datos incorrectos"],"id":33}],[{"start":{"row":226,"column":0},"end":{"row":312,"column":34},"action":"remove","lines":["def inscripcion_view(request):","\tif request.user.is_authenticated():","\t\tif request.method == \"POST\":","\t\t\tformulario = InscripcionForm(request.POST)","\t\t\tinfo = \"Inicializando\"","\t\t\t","\t\t\tif formulario.is_valid():","\t\t\t\tcedula = formulario.cleaned_data['cedula']","\t\t\t\tnombre = formulario.cleaned_data['nombre']","\t\t\t\tapellido = formulario.cleaned_data['apellido']","\t\t\t\tsnp = formulario.cleaned_data['snp']","\t\t\t\tif snp:","\t\t\t\t\ticfes = requests.get('https://morning-brushlands-79611.herokuapp.com/v1/resultados/?codigo=%s&format=json' % snp)","\t\t\t\t\ticfes_json = icfes.json()","\t\t\t\t\tlectura_critica= (icfes_json[0][\"lectura_critica\"])","\t\t\t\t\tmatematicas= (icfes_json[0][\"matematicas\"])","\t\t\t\t\tsociales= (icfes_json[0][\"sociales\"])","\t\t\t\t\tnaturales= (icfes_json[0][\"naturales\"])","\t\t\t\t\tingles= (icfes_json[0][\"ingles\"])","\t\t\t\t\trazonamiento_cuantitativo= (icfes_json[0][\"razonamiento_cuantitativo\"])","\t\t\t\t\tcompetencias_ciudadanas= (icfes_json[0][\"competencias_ciudadanas\"])","\t\t\t\tcolegio = formulario.cleaned_data['colegio']","\t\t\t\tref_pago = formulario.cleaned_data['ref_pago']","\t\t\t\tif ref_pago:","\t\t\t\t\trespuesta = requests.get('http://ws-bank-julianrico.c9users.io/rest/consignacion/?cedula=%s&format=json' % ref_pago)","\t\t\t\t\trespuesta_json = respuesta.json()","\t\t\t\tprograma = str(formulario.cleaned_data['programas_academicos'])","\t\t\t","\t\t\t\ti = inscripciones() #creo una instancia de la clase inscripcion","\t\t\t\t","\t\t\t\ti.cedula = cedula","\t\t\t\ti.nombre = nombre","\t\t\t\ti.apellido = apellido","\t\t\t\ti.snp = snp","\t\t\t\ti.lectura_critica = lectura_critica","\t\t\t\ti.matematicas = matematicas","\t\t\t\ti.sociales = sociales","\t\t\t\ti.naturales = naturales","\t\t\t\ti.ingles = ingles","\t\t\t\ti.razonamiento_cuantitativo = razonamiento_cuantitativo","\t\t\t\ti.competencias_ciudadanas = competencias_ciudadanas","\t\t\t\ti.colegio = colegio","\t\t\t\ti.ref_pago = ref_pago","\t\t\t\ti.carrera = programa","\t\t\t\t","\t\t\t\ti.save() #guardar inscripcion","\t\t\t\t","\t\t\t\t#Consulta de los ponderados de cada materia","\t\t\t\ttry:","\t\t\t\t\tp = programasAcademico.objects.get(nombre=programa)","\t\t\t\texcept programasAcademico.DoesNotExist:","\t\t\t\t\tinfo = \"Programa No existe\"","\t\t\t\telse:","\t\t\t\t\tpl = p.lectura_critica","\t\t\t\t\tpm = p.matematicas","\t\t\t\t\tps = p.sociales","\t\t\t\t\tpn = p.naturales","\t\t\t\t\tpi = p.ingles","\t\t\t\t\tpr = p.razonamiento_cuantitativo","\t\t\t\t\tpc = p.competencias_ciudadanas","\t\t\t\t#Aqui se multiplica cada uno de los resultados de cada prueba por la ponderación que el programa académico ","\t\t\t\tpuntaje = float((lectura_critica) * (pl)) + float((matematicas) * (pm)) + float((sociales) * (ps)) + float((naturales) * (pn)) + float((ingles) * (pi)) + float((razonamiento_cuantitativo) * (pr)) + float((competencias_ciudadanas) * (pc))","\t\t\t\t","\t\t\t\t#Guardo datos para generar la lista de admitidos","\t\t\t\ta = lista_admitidos() #creo una instancia de la clase lista","\t\t\t\t","\t\t\t\ta.cedula = cedula","\t\t\t\ta.nombre = nombre","\t\t\t\ta.apellido = apellido","\t\t\t\ta.puntaje = puntaje                         ","\t\t\t\ta.carrera = programa","\t\t\t\t","\t\t\t\ta.save() #guardar listado","\t\t\t\tinfo = \"Inscripción Satisfactoria!!!!!!\"","\t\t\t\tformulario = InscripcionForm()","\t\t\telse:","\t\t\t\tinfo = \"\"","\t\t\tform = InscripcionForm()","\t\t\tctx = {'form':formulario, 'info':info}","\t\t\treturn render(request,'inscripcion.html',ctx)","","\t\telse:","\t\t\tformulario = InscripcionForm()","\t\tctx = {'form':formulario}","\t\treturn render(request,'inscripcion.html',ctx)","\telse:","\t\treturn HttpResponseRedirect('/')"],"id":34}],[{"start":{"row":226,"column":0},"end":{"row":232,"column":39},"action":"insert","lines":["def icfes (request):","    if request.method == \"POST\":","        snp = request.POST['snp']","        url = \"https://morning-brushlands-79611.herokuapp.com/v1/resultados/?codigo=\" + snp + \"&format=json\"","        webservice = requests.get(url, verify=True)","        #info = webservice.json()","        return HttpResponse(webservice)"],"id":35}],[{"start":{"row":231,"column":0},"end":{"row":232,"column":0},"action":"remove","lines":["        #info = webservice.json()",""],"id":36}],[{"start":{"row":226,"column":0},"end":{"row":231,"column":39},"action":"remove","lines":["def icfes (request):","    if request.method == \"POST\":","        snp = request.POST['snp']","        url = \"https://morning-brushlands-79611.herokuapp.com/v1/resultados/?codigo=\" + snp + \"&format=json\"","        webservice = requests.get(url, verify=True)","        return HttpResponse(webservice)"],"id":37}]]},"ace":{"folds":[{"start":{"row":14,"column":24},"end":{"row":40,"column":40},"placeholder":"..."},{"start":{"row":42,"column":24},"end":{"row":45,"column":40},"placeholder":"..."},{"start":{"row":47,"column":24},"end":{"row":67,"column":41},"placeholder":"..."},{"start":{"row":69,"column":25},"end":{"row":71,"column":33},"placeholder":"..."},{"start":{"row":73,"column":27},"end":{"row":92,"column":44},"placeholder":"..."},{"start":{"row":94,"column":29},"end":{"row":115,"column":39},"placeholder":"..."},{"start":{"row":117,"column":36},"end":{"row":203,"column":34},"placeholder":"..."},{"start":{"row":205,"column":55},"end":{"row":224,"column":40},"placeholder":"..."}],"scrolltop":83.5,"scrollleft":0,"selection":{"start":{"row":226,"column":0},"end":{"row":226,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":5,"state":"start","mode":"ace/mode/python"}},"timestamp":1480710349449,"hash":"11e80c57c4a5b744f143641166a233db2cc2cc71"}