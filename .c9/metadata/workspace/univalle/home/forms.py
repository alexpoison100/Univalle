{"filter":false,"title":"forms.py","tooltip":"/univalle/home/forms.py","undoManager":{"mark":11,"position":11,"stack":[[{"start":{"row":120,"column":0},"end":{"row":158,"column":59},"action":"insert","lines":["class InscripcionesForm(forms.Form):","\tcedula = forms.IntegerField(label='Cédula',widget=forms.TextInput(attrs={'required': True,'type':\"number\",'class':\"form-control\",'placeholder':'Ingrese su Número de Cédula'}))","\tnombre = forms.CharField(label='Nombre',widget=forms.TextInput(attrs={'required': True,'type':\"text\", 'class':\"form-control\",'placeholder':'Ingrese su Nombre Completo'}))","\tapellido = forms.CharField(label='Apellido',widget=forms.TextInput(attrs={'required': True,'type':\"text\", 'class':\"form-control\",'placeholder':'Ingrese sus Apellidos'}))","\tsnp = forms.CharField(label='Número de Registro ICFES',widget=forms.TextInput(attrs={'required': True,'type':\"text\", 'class':\"form-control\",'placeholder':'Ingrese su número de Registro ICFES'}))","\tcolegio = forms.CharField(label='Colegio',widget=forms.TextInput(attrs={'required': True,'type':\"text\", 'class':\"form-control\",'placeholder':'Ingrese Nombre del Colegio'}))","\tref_pago = forms.IntegerField(label='Referencia de Pago',widget=forms.TextInput(attrs={'required': True,'type':\"number\", 'class':\"form-control\",'placeholder':'Ingrese referencia de pago'}))","\tprogramas_academicos= forms.ModelChoiceField(label='Seleccione la Carrera',widget=forms.Select(attrs={'required': True,'class':\"form-control\"}), queryset=programasAcademico.objects.all().order_by('nombre'))","","\t\t#validar si el número de cédula ya existe","\tdef clean_cedula(self):","\t\tcedula = self.cleaned_data['cedula']","\t\ttry:","\t\t\ti = inscripciones.objects.get(cedula=cedula)","\t\texcept inscripciones.DoesNotExist:","\t\t\treturn cedula #para que valide el formulario como si fuera correcto","\t\traise forms.ValidationError('Cédula ya existe')","\t\t","\t\t#validar si el número de registro icfes existe en el webservice","\tdef clean_snp(self):","\t\tsnp = self.cleaned_data['snp']","\t\tif snp:","\t\t\ticfes = requests.get('https://morning-brushlands-79611.herokuapp.com/v1/resultados/?codigo=%s&format=json' % snp)","\t\t\ticfes_json = icfes.json()","\t\t\tif icfes_json:","\t\t\t\treturn snp","\t\t\telse:","\t\t\t\traise forms.ValidationError('Número de Registro No existe')","\t\t\t\t","\t#validar si el numero de pago es valido en el microservicio\t\t\t","\tdef clean_ref_pago(self):","\t\tref_pago = self.cleaned_data['ref_pago']","\t\tif ref_pago:","\t\t\trespuesta = requests.get('http://ws-bank-julianrico.c9users.io/rest/consignacion/?cedula=%s&format=json' % ref_pago)","\t\t\trespuesta_json = respuesta.json()","\t\t\tif respuesta_json:","\t\t\t\treturn ref_pago","\t\t\telse:","\t\t\t\traise forms.ValidationError('Número de Pago No existe')"],"id":357}],[{"start":{"row":120,"column":18},"end":{"row":120,"column":19},"action":"remove","lines":["s"],"id":358}],[{"start":{"row":120,"column":17},"end":{"row":120,"column":18},"action":"remove","lines":["e"],"id":359}],[{"start":{"row":121,"column":29},"end":{"row":121,"column":43},"action":"remove","lines":["label='Cédula'"],"id":360}],[{"start":{"row":121,"column":29},"end":{"row":121,"column":30},"action":"remove","lines":[","],"id":361}],[{"start":{"row":122,"column":26},"end":{"row":122,"column":40},"action":"remove","lines":["label='Nombre'"],"id":362}],[{"start":{"row":122,"column":26},"end":{"row":122,"column":27},"action":"remove","lines":[","],"id":363}],[{"start":{"row":123,"column":28},"end":{"row":123,"column":45},"action":"remove","lines":["label='Apellido',"],"id":364}],[{"start":{"row":124,"column":23},"end":{"row":124,"column":56},"action":"remove","lines":["label='Número de Registro ICFES',"],"id":365}],[{"start":{"row":125,"column":27},"end":{"row":125,"column":43},"action":"remove","lines":["label='Colegio',"],"id":366}],[{"start":{"row":126,"column":31},"end":{"row":126,"column":58},"action":"remove","lines":["label='Referencia de Pago',"],"id":367}],[{"start":{"row":120,"column":0},"end":{"row":158,"column":59},"action":"remove","lines":["class InscripcionForm(forms.Form):","\tcedula = forms.IntegerField(widget=forms.TextInput(attrs={'required': True,'type':\"number\",'class':\"form-control\",'placeholder':'Ingrese su Número de Cédula'}))","\tnombre = forms.CharField(widget=forms.TextInput(attrs={'required': True,'type':\"text\", 'class':\"form-control\",'placeholder':'Ingrese su Nombre Completo'}))","\tapellido = forms.CharField(widget=forms.TextInput(attrs={'required': True,'type':\"text\", 'class':\"form-control\",'placeholder':'Ingrese sus Apellidos'}))","\tsnp = forms.CharField(widget=forms.TextInput(attrs={'required': True,'type':\"text\", 'class':\"form-control\",'placeholder':'Ingrese su número de Registro ICFES'}))","\tcolegio = forms.CharField(widget=forms.TextInput(attrs={'required': True,'type':\"text\", 'class':\"form-control\",'placeholder':'Ingrese Nombre del Colegio'}))","\tref_pago = forms.IntegerField(widget=forms.TextInput(attrs={'required': True,'type':\"number\", 'class':\"form-control\",'placeholder':'Ingrese referencia de pago'}))","\tprogramas_academicos= forms.ModelChoiceField(label='Seleccione la Carrera',widget=forms.Select(attrs={'required': True,'class':\"form-control\"}), queryset=programasAcademico.objects.all().order_by('nombre'))","","\t\t#validar si el número de cédula ya existe","\tdef clean_cedula(self):","\t\tcedula = self.cleaned_data['cedula']","\t\ttry:","\t\t\ti = inscripciones.objects.get(cedula=cedula)","\t\texcept inscripciones.DoesNotExist:","\t\t\treturn cedula #para que valide el formulario como si fuera correcto","\t\traise forms.ValidationError('Cédula ya existe')","\t\t","\t\t#validar si el número de registro icfes existe en el webservice","\tdef clean_snp(self):","\t\tsnp = self.cleaned_data['snp']","\t\tif snp:","\t\t\ticfes = requests.get('https://morning-brushlands-79611.herokuapp.com/v1/resultados/?codigo=%s&format=json' % snp)","\t\t\ticfes_json = icfes.json()","\t\t\tif icfes_json:","\t\t\t\treturn snp","\t\t\telse:","\t\t\t\traise forms.ValidationError('Número de Registro No existe')","\t\t\t\t","\t#validar si el numero de pago es valido en el microservicio\t\t\t","\tdef clean_ref_pago(self):","\t\tref_pago = self.cleaned_data['ref_pago']","\t\tif ref_pago:","\t\t\trespuesta = requests.get('http://ws-bank-julianrico.c9users.io/rest/consignacion/?cedula=%s&format=json' % ref_pago)","\t\t\trespuesta_json = respuesta.json()","\t\t\tif respuesta_json:","\t\t\t\treturn ref_pago","\t\t\telse:","\t\t\t\traise forms.ValidationError('Número de Pago No existe')"],"id":369}]]},"ace":{"folds":[{"start":{"row":8,"column":30},"end":{"row":12,"column":155},"placeholder":"..."},{"start":{"row":14,"column":28},"end":{"row":16,"column":180},"placeholder":"..."},{"start":{"row":18,"column":31},"end":{"row":75,"column":57},"placeholder":"..."},{"start":{"row":77,"column":36},"end":{"row":115,"column":59},"placeholder":"..."},{"start":{"row":117,"column":32},"end":{"row":118,"column":179},"placeholder":"..."}],"scrolltop":37,"scrollleft":0,"selection":{"start":{"row":120,"column":0},"end":{"row":120,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":5,"state":"start","mode":"ace/mode/python"}},"timestamp":1480808962476,"hash":"bac7c49c3b6c50342d4a23ed5e67a4df1440e726"}